<div class="container">
  <div class="row">
    <h2 class="text-center">Shipping Address</h2>

    <swal
      #confirmBuy
      title='Are you sure?'
      type='warning'
      showCancelButton=true,
      confirmButtonColor='#3085d6'
      cancelButtonColor='#d33'
      confirmButtonText='Yes, buy!'
      cancelButtonText='No, cancel!'
      confirmButtonClass='btn btn-success'
      cancelButtonClass='btn btn-danger'
      buttonsStyling=false
      (confirm)="onConfirm()"
    ></swal>
    <swal #buySuccess title="Success" text="Buying process was successfully completed" type="success"></swal>
    <swal #buyError title="Error" text="Somethig go wrong. Please contact with our service" type="error"></swal>

    <div class="row form-group text-center" *ngIf="!useAnotherAddress">
      <h3>Default Address</h3>
      <p>Country: {{userAddress.country}}</p>
      <p>PostCode: {{userAddress.postCode}} - {{userAddress.city}}</p>
      <div>
        <p *ngIf="userAddress.street == null">Locality: {{userAddress.district}}</p>
        <p *ngIf="userAddress.street != null">Locality: {{userAddress.city}}</p>
      </div>
      <p *ngIf="userAddress.street != null">Street: {{userAddress.street}}</p>
      <p>House: {{userAddress.house}}</p>
      <p *ngIf="userAddress.apartment!=0">Apartment: {{userAddress.apartment}}</p>
      <p>Name: {{userAddress.name}}</p>
      <p>Surname: {{userAddress.surname}}</p>

    </div>


    <div *ngIf="useAnotherAddress" class="form-group">
      <app-address
        (userAddress)="onAddressInput($event)"
        (permissionToSubmit)="correctAddress($event)"
      ></app-address>
      <form #user="ngForm">
        <div class="form-group text-center">
          <label for="name">*- Name</label>
          <input class="form-control"
                 type="text"
                 id="name"
                 ngModel
                 name="name"
                 required
                 #name="ngModel"
          >
          <span class="help-block alert-danger" *ngIf="!name.valid && name.touched">Check your input</span>
        </div>

        <div class="form-group text-center">
          <label for="surname">*- Surname</label>
          <input class="form-control"
                 type="text"
                 id="surname"
                 ngModel
                 name="surname"
                 required
                 #surname="ngModel">
          <span class="help-block alert-danger" *ngIf="!surname.valid && surname.touched">Check your input</span>
        </div>


        <table>
          <thead>
          <tr>
            <td></td>
            <td></td>
            <td></td>
          </tr>
          </thead>
          <tbody class="table table-responsive">
          <tr>
            <td>
              *- House Number:
            </td>
            <td></td>

            <td>
              <input class="form-control input-xs"
                     type="number"
                     ngModel
                     name="houseNumber"
                     required
                     min="1"
                     max="999"
              >
            </td>
          </tr>

          <tr>
            <td>
              Apartment Number:
            </td>
            <td></td>
            <td>
              <input class="form-control input-xs"
                     type="number"
                     ngModel
                     name="apartmentNumber"
                     min="0"
                     max="999"
              >
            </td>
          </tr>
          </tbody>
        </table>
      </form>

      <hr>
      <br>
    </div>
    <button class="btn btn-default" (click)="this.useAnotherAddress = !this.useAnotherAddress;"
            *ngIf="!useAnotherAddress">Use different address
    </button>
    <button class="btn btn-default"
            (click)="this.useAnotherAddress = !this.useAnotherAddress;"
            *ngIf="useAnotherAddress">Use default address
    </button>

    <form (ngSubmit)="onSubmit()" #f="ngForm">
      <div class="row text-center">
        <div class="row text-center">
          <h4>Select your supplier</h4>
          <div class="radio text-left" *ngFor="let supplier of suppliers">

            <label>
              <input
                type="radio"
                ngModel
                name="supplierS"
                [value]="supplier.name"
                #supplier2="ngModel"
                required
              >
              *- Supplier: {{supplier.name}} totalPrice: {{supplier.price}} $
            </label>
          </div>
          <p class="text-left">[*] - required fields</p>

          <!--<button class="btn btn-primary" type="submit" [disabled]="!form.valid && checkedAddress && validAddress">Buy-->
          <button
            class="btn btn-primary"
            type="submit"
            [disabled]="!validAddress && useAnotherAddress || !f.valid">Buy
          </button>
        </div>
      </div>
    </form>
  </div>

  <br><br><br>
</div>
